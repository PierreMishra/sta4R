api <- "http://sta-demo.internetofwater.dev/api/v1.1"
library(httr)
get_location <- function (api){
return GET(url = paste0(api, "/Location"))
}
get_location <- function (api=url){
return GET(url = paste0(api, "/Location"))
}
get_location <- function (api=url){
return GET(url = paste0(api, "/Location"))
}
get_location <- function (api=url){
x <- GET(url = paste0(api, "/Location"))
return (x)
}
L <- get_location
L
L <- get_location(api)
L
get_location <- function (api=url){
x <- GET(url = paste0(api, "/Locations"))
return (x)
}
L <- get_location(api)
L
View(L)
get_location <- function (api){
x <- GET(url = paste0(api, "/Locations"))
return (x)
}
L <- get_location(api)
L
library(httr)
api <- "http://sta-demo.internetofwater.dev/api/v1.1"
# get things
get_things <- function(api) {
x <- GET(url = paste0(api, "/Thing"))
return (x)
}
get_things(api)
# get things
get_things <- function(api) {
x <- GET(url = paste0(api, "/Things"))
return (x)
}
get_things(api
get_things(api = api)
library(jsonlite)
?jsonlite
# get things
get_things <- function(api) {
x <- GET(url = paste0(api, "/Things"))
df <- toJSON(x)
return (x)
}
# get things
get_things <- function(api) {
x <- GET(url = paste0(api, "/Things"))
df <- toJSON(x)
return (df)
}
df
get_things(api = api)
# get things
get_things <- function(api) {
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(x)
return (df)
}
get_things(api=api)
# get things
get_things <- function(api) {
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df)
}
get_things(api=api)
things <- get_things(api = api)
View(things)
things$value
head(things$value)
# get things
get_things <- function(api) {
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
}
things <- get_things(api = api)
View(things)
a <- papa
papa <- "char"
a <- papa
get(papa)
'get(papa)'
# get things (by iot_id & name)
get_things <- function(api, iot_id, name) {
if (missing(iot_id) && missing(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (missing(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (missing(iot_name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
get_things(api=api)
abc <- get_things(api=api, iot_id=2)
# get things (by iot_id & name)
get_things <- function(api, iot_id, name) {
if (missing(iot_id) && missing(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (missing(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (missing(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
abc <- get_things(api=api, iot_id=2)
abc <- get_things(api=api, iot_id='2')
abc <- get_things(api=api, iot_id="2")
id <- 2
abc <- get_things(api=api, iot_id=id)
name <- 'TV-157'
abc <- get_things(api=api, name=name)
paste0(api, "/Things?$filter=name eq ", name)
paste0(api, "/Things?$filter=@iot.id eq ", iot_id
paste0(api, "/Things?$filter=@iot.id eq ", iot_id)
iot_id <- 2
paste0(api, "/Things?$filter=@iot.id eq ", iot_id)
# get things (by iot_id & name)
get_things <- function(api, iot_id, name) {
if (missing(iot_id) && missing(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
} else if (missing(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
get_things(api=api, iot_id = iot_id)
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (iot_id == NULL && name == NULL){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (iot_id == NULL) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (name == NULL) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
get_things(api=api, iot_id=iot_id)
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (iot_id == NULL & name == NULL){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (iot_id == NULL) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (name == NULL) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
get_things(api=api, iot_id=iot_id)
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (is.null(iot_id) & is.null(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
} else if (is.null(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
get_things(api=api, iot_id=iot_id)
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (is.null(iot_id) & is.null(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
} else if (is.null(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df$value)
} else if (is.null(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
get_things(api=api, iot_id=iot_id)
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (is.null(iot_id) & is.null(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df)
}
}
get_things(api=api, iot_id=iot_id)
paste0(api, "/Things?$filter=@iot.id eq ", iot_id)
is.null(iot_id)
is.null(name)
is.null(name)
library(httr)
library(jsonlite)
api <- "http://sta-demo.internetofwater.dev/api/v1.1"
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (is.null(iot_id) & is.null(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id eq ", iot_id))
df <- fromJSON(as.character(x))
return (df)
}
}
get_things(api=api, iot_id=2)
get_things(api=api)
abc <- get_things(api=api)
abc <- get_things(api=api, iot_id = 2)
library(httr)
library(jsonlite)
api <- "http://sta-demo.internetofwater.dev/api/v1.1"
paste0(api, "/Things?$filter=@iot.id eq ", 2)
api <- "http://sta-demo.internetofwater.dev/api/v1.1"
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (is.null(iot_id) & is.null(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name eq ", name))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id%20eq%20", iot_id))
df <- fromJSON(as.character(x))
return (df)
}
}
abc <- get_things(api=api, iot_id = 2)
View(abc)
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (is.null(iot_id) & is.null(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name%20eq%20%27", name, "%27"))
df <- fromJSON(as.character(x))
return (df)
} else if (is.null(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id%20eq%20", iot_id))
df <- fromJSON(as.character(x))
return (df)
}
}
abc <- get_things(api=api, name = "TV-157")
# get things (by iot_id & name)
get_things <- function(api, iot_id = NULL, name = NULL) {
if (is.null(iot_id) & is.null(name)){
x <- GET(url = paste0(api, "/Things"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(iot_id)) {
x <- GET (url = paste0(api, "/Things?$filter=name%20eq%20%27", name, "%27"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(name)) {
x <- GET (url = paste0(api, "/Things?$filter=@iot.id%20eq%20", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
}
abc <- get_things(api=api, name = "TV-157")
View(abc)
abc <- get_things(api=api)
View(abc)
# get location
get_location <- function (api){
x <- GET(url = paste0(api, "/Locations"))
return (x)
}
L <- get_location(api)
View(L)
paste0(api, "/Locations")
# get location
get_location <- function (api){
x <- GET(url = paste0(api, "/Locations"))
return (x$value)
}
L <- get_location(api)
# get location
get_location <- function (api){
x <- GET(url = paste0(api, "/Locations"))
return (x)
}
L <- get_location(api)
# get location
get_location <- function (api){
x <- GET(url = paste0(api, "/Locations"))
df <- fromJSON(as.character(x))
return (df)
}
L <- get_location(api)
View(L)
L <- get_location(api)
# get location
get_location <- function (api){
x <- GET(url = paste0(api, "/Locations"))
df <- fromJSON(as.character(x))
return (df$value)
}
L <- get_location(api)
View(L)
z <- c(1,2)
z
location.type <- "point"
location.coordinates <- c(-105.795, 32.8542)
paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", location.coordinates, "')" )
paste0(location.coordinates)
print(location.coordinates)
# get location (iot_id, location.coordinates)
get_location <- function (api, iot_id=NULL, location.coordinates=NULL, location.type=NULL){
if (is.null(iot_id) & is.null(location.coordinates) & is.null(location.type)){
x <- GET(url = paste0(api, "/Locations"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(location.coordinates)){
x <- GET(url = paste0(api, "/Locations?$filter=@iot.id%20eq%20", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(iot_id)){
len <- lengt
x <- GET(url = paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", location.coordinates[1], ")')" ))
df <- fromJSON(as.character(x))
return (df$value)
}
}
paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", location.coordinates[1], ")')" )
paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", location.coordinates[1],
location.coordinates[2] ")')" )
paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", location.coordinates[1],
location.coordinates[2], ")')" )
paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", location.coordinates[1], " ",
location.coordinates[2], ")')" )
get(location.coordinates)
paste(location.coordinates)
c(paste(location.coordinates))
paste(c(location.coordinates))
paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", paste(c(location.coordinates), collapse = " "), ")')" )
# get location (iot_id, location.coordinates)
get_location <- function (api, iot_id=NULL, location.coordinates=NULL, location.type=NULL){
if (is.null(iot_id) & is.null(location.coordinates) & is.null(location.type)){
x <- GET(url = paste0(api, "/Locations"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(location.coordinates)){
x <- GET(url = paste0(api, "/Locations?$filter=@iot.id%20eq%20", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(iot_id)){
x <- GET(url = paste0(api, "/Locations?$filter=st_equals(location,geography'",
toupper(location.type), "(", paste(c(location.coordinates), collapse = " "), ")')" ))
df <- fromJSON(as.character(x))
return (df$value)
}
}
L <- get_location(api, location.coordinates = location.coordinates)
# get location (iot_id, location.coordinates)
get_location <- function (api, iot_id=NULL, location.coordinates=NULL, location.type=NULL){
if (is.null(iot_id) & is.null(location.coordinates) & is.null(location.type)){
x <- GET(url = paste0(api, "/Locations"))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(location.coordinates)){
x <- GET(url = paste0(api, "/Locations?$filter=@iot.id%20eq%20", iot_id))
df <- fromJSON(as.character(x))
return (df$value)
}
else if (is.null(iot_id)){
x <- GET(url = paste0(api, "/Locations?$filter=st_equals(location,geography%27",
toupper(location.type), "(", paste(c(location.coordinates), collapse = "%20"), ")%27)" ))
df <- fromJSON(as.character(x))
return (df$value)
}
}
L <- get_location(api, location.coordinates = location.coordinates)
lc <- c(-105.795, 32.8542)
L <- get_location(api, location.coordinates = lc)
L
type <- "point"
L <- get_location(api, location.coordinates = lc, location.type = type)
L
